# 简历智投 - 微信公众号招聘文章自动投递系统

> 用户在浏览微信公众号招聘文章时，通过浏览器插件自动提取岗位信息和邮箱，上传简历后 AI 智能优化定制，经人工确认（或跳过）后自动发送。

## 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                    用户浏览微信文章                        │
│                  mp.weixin.qq.com/s/xxx                   │
└───────────────────────┬─────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────┐
│              Chrome 浏览器扩展 (Content Script)           │
│                                                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐ │
│  │ 岗位提取  │→│ 简历上传  │→│ AI 优化   │→│ 确认发送 │ │
│  │ Step 1   │  │ Step 2   │  │ Step 3   │  │ Step 4  │ │
│  └──────────┘  └──────────┘  └──────────┘  └─────────┘ │
│                                                          │
│  悬浮面板 UI - 引导用户完成 4 步操作                       │
└───────────────────────┬─────────────────────────────────┘
                        │ HTTP API
                        ▼
┌─────────────────────────────────────────────────────────┐
│              后端服务 (Node.js + Express)                 │
│                                                          │
│  ┌──────────────┐  ┌────────────────┐  ┌─────────────┐ │
│  │  简历解析服务  │  │  简历定制服务    │  │ 邮件发送服务 │ │
│  │ ResumeParser │  │ResumeCustomizer│  │ EmailSender │ │
│  └──────┬───────┘  └───────┬────────┘  └──────┬──────┘ │
│         │                  │                   │        │
│  ┌──────▼──────────────────▼───────────────────▼──────┐ │
│  │              数据存储 (DataStore)                    │ │
│  │    简历存储 | 定制记录 | 投递历史 | 统计数据          │ │
│  └────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

## 工作流程

```
用户打开微信招聘文章
        │
        ▼
   侧边面板出现
        │
        ├──→ Step 1: 点击"提取岗位信息"
        │         ├── 正则提取岗位、公司、要求、邮箱等
        │         └── 后端 AI 补充提取（如有遗漏）
        │
        ├──→ Step 2: 上传简历（拖拽或点击）
        │         ├── 支持 PDF / Word / TXT
        │         └── 后端解析简历结构
        │
        ├──→ Step 3: 点击"AI 优化"
        │         ├── 根据岗位要求重组简历
        │         ├── 匹配关键词优先排序
        │         ├── 生成求职信
        │         └── 生成邮件主题和正文
        │
        └──→ Step 4: 确认发送
                  ├── 预览邮件内容（可编辑）
                  ├── "确认发送" → 人工确认后发送
                  └── "跳过确认" → 直接发送
```

## 项目结构

```
resume-agent-system/
├── browser-extension/          # Chrome 浏览器扩展
│   ├── manifest.json           # 扩展配置
│   ├── icons/                  # 扩展图标
│   └── src/
│       ├── content/
│       │   └── content.js      # 内容脚本 - 岗位提取 & 操作面板
│       ├── background/
│       │   └── background.js   # 后台服务 - 消息通信
│       ├── popup/
│       │   ├── popup.html      # 弹窗页面
│       │   └── popup.js        # 弹窗逻辑 - 设置 & 统计
│       └── styles/
│           └── content.css     # 面板样式
│
├── backend/                    # 后端服务
│   ├── src/
│   │   ├── index.ts            # 服务入口
│   │   ├── routes/
│   │   │   └── api.ts          # API 路由
│   │   ├── services/
│   │   │   ├── resume-parser.ts      # 简历解析
│   │   │   ├── resume-customizer.ts  # 简历定制
│   │   │   ├── email-sender.ts       # 邮件发送
│   │   │   ├── job-extractor.ts      # 岗位提取(后端)
│   │   │   └── data-store.ts         # 数据存储
│   │   └── types/
│   │       └── index.ts        # TypeScript 类型定义
│   ├── .env.example            # 环境变量模板
│   ├── package.json
│   └── tsconfig.json
│
├── shared/
│   └── types.ts                # 共享类型定义
│
├── package.json
└── README.md
```

## 快速开始

### 1. 安装后端依赖

```bash
cd resume-agent-system/backend
npm install
```

### 2. 配置邮箱

```bash
cp .env.example .env
# 编辑 .env 文件，填入你的邮箱配置
```

**QQ 邮箱配置示例:**
- `SMTP_HOST=smtp.qq.com`
- `SMTP_PORT=465`
- `SMTP_USER=你的QQ邮箱`
- `SMTP_PASS=QQ邮箱授权码`（在 QQ 邮箱设置 → POP3/SMTP 中获取）

**163 邮箱配置示例:**
- `SMTP_HOST=smtp.163.com`
- `SMTP_PORT=465`
- `SMTP_USER=你的163邮箱`
- `SMTP_PASS=163邮箱授权码`

### 3. 启动后端服务

```bash
npm run dev
```

服务将在 `http://localhost:3000` 启动。

### 4. 安装浏览器扩展

1. 打开 Chrome，访问 `chrome://extensions/`
2. 开启右上角"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `browser-extension` 目录
5. 扩展安装完成

### 5. 使用流程

1. 打开任意微信公众号招聘文章
2. 右侧出现「简历智投」操作面板
3. 按步骤操作：提取 → 上传 → 优化 → 发送

## API 接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/api/health` | 健康检查 |
| GET | `/api/stats` | 获取投递统计 |
| POST | `/api/resume/upload` | 上传简历（multipart/form-data） |
| GET | `/api/resume/list` | 获取已上传简历列表 |
| POST | `/api/extract` | 后端辅助提取岗位信息 |
| POST | `/api/resume/customize` | AI 优化定制简历 |
| POST | `/api/resume/send` | 发送简历邮件 |
| GET | `/api/submissions` | 获取投递历史 |

## 核心功能说明

### 岗位信息提取
- **前端提取**：Content Script 使用正则表达式从文章 DOM 中提取岗位名称、公司、要求、邮箱等
- **后端补充**：处理反爬混淆邮箱（如 `xxx[at]xxx[dot]com`），深度提取多岗位文章

### 简历解析
- 支持 PDF（使用 pdf-parse）、Word、TXT 格式
- 自动识别并提取：姓名、电话、邮箱、教育背景、工作经验、技能、项目经验、自我评价

### AI 简历定制
- 根据岗位关键词重新排序技能（匹配项优先）
- 重组工作经验段落（相关度高的优先）
- 增强个人摘要，标注匹配能力
- 自动生成求职信、邮件主题和正文

### 人工确认
- 发送前可预览完整邮件内容
- 支持编辑邮件主题和正文
- 可选择"跳过确认直接发送"

## 技术栈

| 组件 | 技术 |
|------|------|
| 浏览器扩展 | Chrome Extension Manifest V3, vanilla JS |
| 后端服务 | Node.js, Express, TypeScript |
| 简历解析 | pdf-parse, 正则表达式 |
| 邮件发送 | Nodemailer (SMTP) |
| 数据存储 | 内存存储（可扩展为数据库） |

## 扩展建议

- **集成大模型 API**：接入 Claude/GPT API 进行更智能的简历优化和求职信生成
- **数据库持久化**：使用 SQLite/PostgreSQL 替代内存存储
- **多格式简历导出**：生成 PDF 格式定制简历
- **批量投递**：支持同时投递多个岗位
- **投递追踪**：邮件打开/回复追踪
- **简历模板**：提供多种简历排版模板

## 许可证

MIT
